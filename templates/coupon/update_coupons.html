{% extends "base.html" %}
{% block title %}Create Coupons{% endblock %}

{% block stylesheets %}

<link rel="stylesheet" href="/static/css/adm_dashboard.css">

{% endblock %}

{% block content %}
{% from "includes/_form.html" import render_field %}
<div class="container-padding-50"></div>
<div class="card">
  <div class="card-body">
    <h1 class="display-4">Admin Create Coupon</h1>
    <h3>Create your coupons here</h3>
    <div class="container-padding-20"></div>
    <form method="POST" action="">
      <div class="form-group container-padding-20">
        {{ render_field(form.name, class="form-control") }}
      </div>
      <div class="form-group container-padding-20">
        {{ render_field(form.discount, class="form-control") }}
      </div>
      <div class="form-group container-padding-20">
        <p>Coupon Code </p>
        {{coupon.get_coupon_code_id()}}
      </div>
      <div class="form-group container-padding-20">
        {{ render_field(form.startdate, class="form-control datepicker") }}
      </div>
      <div class="form-group container-padding-20">
        {{ render_field(form.enddate, class="form-control datepicker") }}
      </div>
      <div class="container-padding-20"></div>
      <input type="submit" value="Create Coupon" class="btn btn-warning"/>
      <input type="reset" value="Clear Fields" class="btn btn-danger"/>
    </form>
  </div>
</div>
<div class="container-padding-20"></div>

{% endblock %}


{% block scripts %}
<script>
  //Datepicker function
  $(document).ready(function() { 
  ///////

  //Datepicker variables
  var startDate;
  var endDate;
  let today = new Date();

  //user picks start date, default date is today
   $( "#startdate" ).datepicker({
  dateFormat: 'yy/mm/dd',
  });
  ///////
  ///////

  //user picks end date, default date is today
   $( "#enddate" ).datepicker({
  dateFormat: 'yy/mm/dd',
  });
  ///////

  //if start date is picked, end date minimum is set to start date
  $('#startdate').change(function() {
  startDate = $(this).datepicker('getDate');
  $("#enddate").datepicker("option", "minDate", startDate );
  })
  
  ///////
  //if end date is picked, maximum date  is set to end date , minimum date is default to be still today date
  $('#enddate').change(function() {
  endDate = $(this).datepicker('getDate');
  $("#startdate").datepicker("option", "maxDate", endDate );
  })
  ////////////////
  })
  </script>
{% endblock %}